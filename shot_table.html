<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shooting Record - Statistics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <h1 style="margin: 30px; text-align: center;">Shot Data</h1>
    
    <div class="container-fluid" style="text-align: center; margin:30px;">
        <table class="table table-hover table-bordered caption-top" style="float: left; width:45%">
            <caption>슈팅 기록</caption>
            <thead class="thead">
              <tr>
                <th scope="col">index</th>
                <th scope="col">Period</th>
                <th scope="col">Number</th>
                <th scope="col">Name</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
        <table class="table table-hover table-bordered caption-top" style="float:left; margin-left:5%; width: 45%;">
          <caption class="sum"></caption>
          <caption>선수별 슈팅 횟수</caption>
            <thead class="thead">
              <tr>
                <th scope="col">Number</th>
                <th scope="col">Name</th>
                <th scope="col">shots</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        
        let recorded = JSON.parse(localStorage.getItem('recorded'));
        const sum = document.querySelector(".sum")
        sum.innerHTML = "총 슈팅 수 : "+Object.keys(recorded).length;

        for(let i=1; i<=Object.keys(recorded).length; i++) {
            let idx = i;
            let inputnum = recorded[i].num;
            let inputName = recorded[i].name;
            let period = recorded[i].period;

            let newRow = document.createElement("tr");
            let column_idx = document.createElement("td");
            let column_num = document.createElement("td");
            let column_name = document.createElement("td");
            let column_period = document.createElement("td");

            let num = document.createTextNode(inputnum);
            column_num.appendChild(num);
            let name = document.createTextNode(inputName);
            console.log
            column_name.appendChild(name);
            let textidx = document.createTextNode(idx);
            column_idx.appendChild(textidx);
            let textperiod = document.createTextNode(period);
            column_period.appendChild(textperiod);

            newRow.appendChild(column_idx);
            newRow.appendChild(column_period);
            newRow.appendChild(column_num);
            newRow.appendChild(column_name);

        document.querySelectorAll("tbody")[0].appendChild(newRow);
        }

        let playerinfo = JSON.parse(localStorage.getItem('playerinfo'));
        for(let i=0; i<Object.keys(playerinfo).length; i++){
            let key = Object.keys(playerinfo)[i];
            let name = playerinfo[key];
            let count = 0;
            let newRow = document.createElement("tr");
            
            let column_num = document.createElement("td");
            let column_name = document.createElement("td");
            let column_count = document.createElement("td");

            for(let j=1; j<=Object.keys(recorded).length; j++){
                if (recorded[j].num==key){
                    count += 1;
                }
            }
            let num = document.createTextNode(key);
            column_num.appendChild(num);
            let textname = document.createTextNode(name);
            column_name.appendChild(textname);
            let textcount = document.createTextNode(count);
            column_count.appendChild(textcount);
            newRow.appendChild(column_num);
            newRow.appendChild(column_name);
            newRow.appendChild(column_count);


            document.querySelectorAll("tbody")[1].appendChild(newRow);

        }
    </script>
</body>
</html>
